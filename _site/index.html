<!DOCTYPE html>
<html>
  <head>
    <title>Home&mdash;Indicatrix</title>

    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/pygments.css" />
<link rel="stylesheet" href="/css/main.css" />


  </head>
  <body>
    <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand indicatrix" href="/">Indicatrix</a>
      <ul class="nav">
        <li><a href="/projects">Projects</a></li>
        <li><a href="/copyright">Copyright</a></li>
        <li><a href="/archive">Archive</a></li>
      </ul>
    </div>
  </div>
</div>


    <div class="container">
      <div class="hero-unit">
        <h1><a href="/"><img src="/img/header.jpg" alt="Indicatrix" /></a></h1>
        <div class="vspacer"></div>
        <p>A blog about mapping, Python, GIS, JavaScript, transit, open data,
          planning, &c.</p>
      </div>

      <div class="row">
        <div class="span9">
          
  
  <!-- link it b/c this template is used on the home page -->
<a href="/2012/06/16/migrating-to-jekyll/">
  <h2>Migrating to Jekyll</h2>
</a>
<p class="author">by mattwigway on June 16, 2012</p>

<p>Welcome! I&rsquo;m currently migrating this blog to <a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a>; comments should be restored soon.</p>


<!-- again, b/c it's used on the home page -->
<a href="/2012/06/16/migrating-to-jekyll/">Permalink to this post</a>

  <div class="vspacer5"></div>

  
  <!-- link it b/c this template is used on the home page -->
<a href="cgs2012">
  <h2>Measuring Urban Mobility and Accessibility Using OpenTripPlanner Analyst</h2>
</a>
<p class="author">by mattwigway on April 29, 2012</p>

<p><a href="/a/2012-04-29-measuring-urban-mobility-and-accessibility-using-opentripplanner-analyst/urbanmobilityposter.png"><img src="/a/2012-04-29-measuring-urban-mobility-and-accessibility-using-opentripplanner-analyst/urbanmobilityposter.png" alt="Thumbnail of the poster" /></a></p>

<p>I presented a poster on <a href="http://github.com/openplans/opentripplanner-analyst">OpenTripPlanner Analyst</a> at the <a href="http://calgeog.org">California Geographical Society</a> 2012 conference. Here are the poster and some companion materials:</p>

<ul>
<li><p><a href="/a/cgs2012/urbanmobilityposter.pdf">Poster (PDF, 1.7MB)</a>&mdash;-the poster itself.</p></li>
<li><p><a href="/a/cgs2012/urbanmobilitymapbook.pdf">Maps (PDF, 7.8MB)</a>&mdash;-all of the maps that were present on the poster. Some were somewhat small, here is a PDF of all of them in vector format, suitable for stretching across the sides of large buildings.</p></li>
<li><p><a href="/a/cgs2012/urbanmobilitymethodology.pdf">Methodology (PDF, 207KB)</a>&mdash;-the methodology behind making each of the figures. This is a more in-depth, technical explanation than was provided on the poster itself.</p></li>
</ul>


<p>You may also want to visit the homepage of the <a href="http://opentripplanner.com">OpenTripPlanner Project</a>.</p>

<p>Finally, you may want to see some of the other things I&rsquo;m working on by visiting <a href="/">my blog</a>.</p>


<!-- again, b/c it's used on the home page -->
<a href="cgs2012">Permalink to this post</a>

  <div class="vspacer5"></div>

  
  <!-- link it b/c this template is used on the home page -->
<a href="/2012/04/01/elevators-in-opentripplanner/">
  <h2>Elevators in OpenTripPlanner</h2>
</a>
<p class="author">by mattwigway on April 01, 2012</p>

<p>I&rsquo;ve been working on the <a href="http://opentripplanner.org">OpenTripPlanner</a> project quite a bit lately. One thing I did a month or so ago was to implement elevator support in the routing engine. I decomposed OSM nodes tagged highway=elevator by their constituent levels, and built edges between them to represent boarding, riding on, and alighting from an elevator. I was very impressed with the friendliness and responsiveness of the community.</p>

<p>One challenge was parsing OSM levels. They can come from multiple sources&mdash;-level_map relations, level tags or layer tags. I wanted to support all of these, or any combination (on a single elevator). I originally did this by noting the source and adding 0, 1000 or 2000 to the level, but Andrew Byrd has made an OSMLevel class which handles this much more neatly. Level maps allow levels to be named, which is quite nice: &ldquo;take elevator to garage&rdquo; instead of &ldquo;take elevator to -1.&rdquo; So, for all OSM mappers out there, here is a quick guide to making routable elevators:</p>

<ul>
<li>Tag your elevator nodes highway=elevator</li>
<li>Add access restrictions: wheelchair=yes and bicycle=yes tags</li>
<li>Use an OSM Level Map relation if there is any possibility that level names would not be clear.</li>
</ul>


<p><em>EDIT:</em> To clarify, the level annotations are always on the <em>ways</em> connecting to the elevators, not the elevator nodes themselves.</p>


<!-- again, b/c it's used on the home page -->
<a href="/2012/04/01/elevators-in-opentripplanner/">Permalink to this post</a>

  <div class="vspacer5"></div>

  
  <!-- link it b/c this template is used on the home page -->
<a href="/2012/04/01/bart-shocker-first-inner-core-infill-station-since-embarcadero/">
  <h2>BART Shocker: First Inner-Core Infill Station Since Embarcadero</h2>
</a>
<p class="author">by mattwigway on April 01, 2012</p>

<p>BART shocked Bay Area transit enthusiasts this morning with an announcement that it plans to build a new infill station, to serve all San Francisco lines, at Treasure Island.</p>

<p>&ldquo;Treasure Island has long been underserved by transit,&rdquo; said a BART employee, who is heading the project and acting as a liaison between the agencies involved. &ldquo;The residents have long been frustrated that they live within a mile of rail rapid transit but cannot access it.&rdquo;</p>

<p>The announcement has met with mixed results. While most residents of Treasure Island are ecstatic, East Bay commuters are not so pleased. One person, who lives in Castro Valley but commutes via BART daily to his job as a web designer in San Francisco&rsquo;s Mission, complained that it will slow service. &ldquo;BART travels at up to 80 mph in the Transbay Tube, crossing the Bay in just a few minutes. By adding a stop in the middle of that, you not only add the 20-30 seconds of time at the stop, but also the time it takes to accelerate and decelerate to that stop.&rdquo;</p>

<p>Cyclists, however, are happy about the project. The new eastern span of the Bay Bridge will sport a bike path, but the western span, not scheduled for replacement, does not. By allowing a quick connection between the Yerba Buena Island and San Francisco, a cyclist can ride to Yerba Buena, then catch BART for a quick ride into the city. Responding to the head of the Greater Golden Gate, Gough and Geary Boulevard Cyclists' Association, a BART employee confirmed that the cycle link is a critical part of the project, and that the station will have new electronic bike lockers, as well as easy bicycle access from the bridge.</p>

<p>For anyone who hasn&rsquo;t caught it yet, note <a href="http://en.wikipedia.org/wiki/April_Fools%27_Day">date of issue</a>.</p>

<p>And if you still haven&rsquo;t caught it, read <a href="http://en.wikipedia.org/wiki/April_Fools%27_Day">this article</a>.</p>

<p>Happy April Fools' Day!</p>


<!-- again, b/c it's used on the home page -->
<a href="/2012/04/01/bart-shocker-first-inner-core-infill-station-since-embarcadero/">Permalink to this post</a>

  <div class="vspacer5"></div>

  
  <!-- link it b/c this template is used on the home page -->
<a href="/2012/03/31/conditionals-in-the-qgis-raster-calculator/">
  <h2>Conditionals in the QGIS raster calculator</h2>
</a>
<p class="author">by mattwigway on March 31, 2012</p>

<p>I needed to do some conditionals in the QGIS raster calculator, but it doesn&rsquo;t support that&mdash;-or at least doesn&rsquo;t seem to. But it does support logical operators, with a result of either 0 or 1. For instance, here&rsquo;s the script I wrote:</p>

<pre>
# Subtract them
((DavisQuad2012-02-25T16_00_00Z@1  -  DavisQuad2012-02-29T16_00_00Z@1)*
# Multiply by 1 if neither is 255 (NoData), 0 otherwise
(DavisQuad2012-02-25T16_00_00Z@1 != 255 AND DavisQuad2012-02-29T16_00_00Z@1 != 255))
# Subtract 32768 if either one was NoData, giving us -32768 for NoData.
-
(32768*(DavisQuad2012-02-25T16_00_00Z@1 = 255 OR DavisQuad2012-02-29T16_00_00Z@1 = 255))
</pre>


<p>Of course, you can&rsquo;t actually put the comments in. But what it does is this: First, I subtract one raster from the other and multiply that by the logical operation that neither one contains NoData. That gives me the difference of the rasters, or 0 if either one contains NoData. Then I subtract 32768 multiplied by the inverse of the aforementioned logical operation, so any pixel with a NoData value in either of the original rasters is -32768 in the new one.</p>

<p>Note: I expanded on an idea from the GDAL <a href="http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/scripts/gdal_calc.py">gdal_calc.py</a> script.</p>


<!-- again, b/c it's used on the home page -->
<a href="/2012/03/31/conditionals-in-the-qgis-raster-calculator/">Permalink to this post</a>

  <div class="vspacer5"></div>


<div class="paginator">
  

  
    <a href="/page2" class="next">Older Posts</a>
  
  <div class="clear"></div>
</div>

        </div>
        <div class="span3">
          <div class="barbox">
  <h3>Other Accounts</h3>
  <ul class="linklist">
    <li><a href="http://github.com/mattwigway">GitHub</a></li>
    <li><a href="http://twitter.com/mattwigway">Twitter</a></li>
  </ul>
</div>

<div class="barbox">
  <h3>Blogroll</h3>
  <ul class="linklist">
    <li>
      <a href="http://www.humantransit.org">Human Transit</a>
    </li>
    <li>
      <a title="Free and Open Source GIS" href="http://underdark.wordpress.com">UnderDark</a>
    </li>
    <li>
      <a href="http://transitappliance.org">Transit Appliance Development</a>
    </li>
    <li>
      <a href="http://portlandtransport.org">Portland Transport</a>
    </li>
    <li>
      <a href="http://thesource.metro.net">The Source&mdash;Los Angeles Metro</a>
    </li>
    <li>
      <a title="The Source en EspaÃ±ol" href="http://elpasajero.metro.net">El Pasajero&mdash;Metro de Los Angeles</a>
    </li>
    <li>
      <a href="http://howweroll.trimet.org">How we Roll&mdash;Portland TriMet</a>
    </li>
    <li>
      <a target="_blank" title="BRT for Silicon Valley." href="http://valleyrapid.org">Valley Rapid&mdash;VTA BRT</a>
    </li>
  </ul>
</div>

<div class="barbox">
  <a href="/feed/feed.xml">New posts <img src="/img/feed.png" /></a>
</div>

        </div>
      </div>

      <div class="vspacer5"></div>

      <div class="row">
  <!-- force it center -->
  <div class="span1">&nbsp;</div>
  <div class="span10">
    <p class="center">
      <a href="/copyright">CC-BY-SA 3.0</a> by Matt Conway, 2011-2012. Created with
      Jekyll and Bootstrap.
    </p>
  </div>
</div>

    </div>
    <script src="/lib/bootstrap/js/bootstrap.min.js"></script>

  </body>
